# MNIST Digit Classifier (Transformer) - Project Structure

This document outlines the detailed directory structure and the purpose of key files for the Week 3 MNIST Vision Transformer project by **Team Backprop Bunch**. The project aims to build and train a Vision Transformer model progressively, starting with single-digit recognition and scaling up to more complex scenarios.

## Directory Tree ğŸŒ³

```
ğŸ“ mlx-w3-mnist-transformer/
â”œâ”€â”€ ğŸ“ app/
â”‚   â””â”€â”€ ğŸ“„ __init__.py
â”œâ”€â”€ ğŸ“„ config.yaml           # âš™ï¸ NEW Configuration for ViT (phases, model, training)
â”œâ”€â”€ ğŸ“ data/                 # ğŸ“Š MNIST dataset (auto-downloaded)
â”‚   â””â”€â”€ MNIST/
â”‚       â”œâ”€â”€ processed/
â”‚       â””â”€â”€ raw/
â”œâ”€â”€ ğŸ³ Dockerfile
â”œâ”€â”€ ğŸ“ docs/                 # ğŸ“„ Project documentation
â”‚   â”œâ”€â”€ ğŸ“„ 05_QKV.md         # (Example Transformer Note)
â”‚   â”œâ”€â”€ (...)             # (Other relevant general notes: 06-12)
â”‚   â””â”€â”€ ğŸ“„ STRUCTURE.MD      # ğŸ‘ˆ This file
â”œâ”€â”€ ğŸ“ logs/                 # ğŸ“ Runtime logs (e.g., mnist_vit_train.log)
â”œâ”€â”€ ğŸ“ models/               # ğŸ§  Saved model artifacts
â”‚   â””â”€â”€ ğŸ“ mnist_vit/        #    Subdir for this project's models
â”‚       â””â”€â”€ ğŸ“ phase1_run_XYZ/ #    Example run output
â”‚           â”œâ”€â”€ ğŸ“„ model_final.pth
â”‚           â”œâ”€â”€ ğŸ“„ training_losses.json
â”‚           â””â”€â”€ ğŸ“„ loss_plot.png
â”œâ”€â”€ ğŸ“ notebooks/            # ğŸ““ Jupyter notebooks for exploration
â”‚   â””â”€â”€ ğŸ“„ 01_mnist_vit_exploration.ipynb
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ LICENSE
â”œâ”€â”€ ğŸ“„ README.md             # ğŸ‘‹ Updated project overview
â”œâ”€â”€ ğŸ“„ requirements.txt      # ğŸ“¦ Python dependencies (torch, torchvision, timm?, wandb)
â”œâ”€â”€ ğŸ“ scripts/              # â–¶ï¸ Runnable Python scripts
â”‚   â”œâ”€â”€ ğŸ“„ train_mnist_vit.py # ğŸ‘ˆ Main training script (handles phases)
â”‚   â”œâ”€â”€ ğŸ“„ evaluate.py       # ğŸ‘ˆ Evaluation script
â”‚   â””â”€â”€ ğŸ“„ generate_project_doc.py # (Optional utility)
â”œâ”€â”€ ğŸ src/                  # ğŸ Core Python source code
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py
â”‚   â””â”€â”€ ğŸ“ mnist_transformer/ # ğŸ‘ˆ Module for ViT logic
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py
â”‚       â”œâ”€â”€ ğŸ“„ dataset.py    # ğŸ‘ˆ Handles MNIST (P1), 2x2 grid (P2), dynamic (P3)
â”‚       â”œâ”€â”€ ğŸ“„ modules.py    # ğŸ‘ˆ ViT building blocks (PatchEmbed, Attention, MLP, EncoderBlock)
â”‚       â”œâ”€â”€ ğŸ“„ model.py      # ğŸ‘ˆ Defines the VisionTransformer class (adapts for P1/P2/P3)
â”‚       â”œâ”€â”€ ğŸ“„ trainer.py    # ğŸ‘ˆ Training loop logic (adapts loss/steps for P1/P2/P3)
â”‚       â””â”€â”€ ğŸ“„ evaluation.py # ğŸ‘ˆ (Optional) Metrics calculation
â”‚
â””â”€â”€ ğŸ› ï¸ utils/                # ğŸ› ï¸ Shared utility modules
    â”œâ”€â”€ ğŸ“„ __init__.py
    â”œâ”€â”€ ğŸ“„ device_setup.py
    â”œâ”€â”€ ğŸ“„ logging.py
    â””â”€â”€ ğŸ“„ run_utils.py
```

## Detailed Directory & File Descriptions ğŸ“œ

*   **Root Directory (`mlx-w3-mnist-transformer/`)**: Contains configuration, main scripts, documentation, and subdirectories for source code, data, models, etc. for the MNIST Vision Transformer project.
    *   ğŸ“„ **`.gitignore`**: Specifies untracked files/directories (e.g., `.venv`, `logs/`, `models/`, `wandb/`, `__pycache__/`, `data/MNIST/`).
    *   ğŸ“„ **`config.yaml`** âš™ï¸: Central configuration file for the ViT project. Defines paths, dataset parameters (image size, patch size, classes per phase), model hyperparameters (embedding dim, depth, heads, MLP ratio), training settings (epochs, batch size, learning rate, optimizer, warmup per phase), and logging settings.
    *   ğŸ“„ **`Dockerfile`** ğŸ³: (Placeholder/Optional) Instructions for building a Docker container image, enabling deployment or reproducible environments.
    *   ğŸ“„ **`LICENSE`**: Contains the project's license information.
    *   ğŸ“„ **`README.md`** ğŸ‘‹: Main project overview. Describes the MNIST ViT goal (progressive phases), setup instructions, usage for training/evaluation, and team members. *(Needs updating for Week 3)*.
    *   ğŸ“„ **`requirements.txt`** ğŸ“¦: Lists Python dependencies (`torch`, `torchvision`, `wandb`, `PyYAML`, `tqdm`, potentially `timm`, `matplotlib`, `numpy`, `pandas`, `scikit-learn`).

*   ğŸ“ **`app/`**: (Placeholder) Contains code for a potential future user-facing application or API service.
    *   ğŸ“„ **`__init__.py`**: Marks `app` as a Python package.

*   ğŸ“ **`data/`** ğŸ“Š: Default location for datasets.
    *   ğŸ“ **`MNIST/`**: Directory where `torchvision.datasets.MNIST` will automatically download and store the MNIST dataset files. (Should be gitignored).

*   ğŸ“ **`docs/`** ğŸ“„: Contains project documentation, including conceptual notes on Transformers and ViT.
    *   ğŸ“„ `0X_*.md`: Markdown files explaining core concepts (Attention, ViT architecture, Training Tricks, etc.).
    *   ğŸ“„ **`STRUCTURE.MD`**: This file.

*   ğŸ“ **`logs/`** ğŸ“: Stores runtime log files generated by the training/evaluation scripts (configured in `utils/logging.py`). (Gitignored).

*   ğŸ“ **`models/`** ğŸ§ : Root directory for storing saved model artifacts. (Gitignored).
    *   ğŸ“ **`mnist_vit/`**: Contains subdirectories specific to trained MNIST Vision Transformer runs.
        *   ğŸ“ **`<RUN_NAME>/`** (e.g., `phase1_run_XYZ/`): A subdirectory created for each training run, named based on phase, hyperparameters or W&B run name.
            *   ğŸ“„ **`model_final.pth`**: Saved state dictionary of the trained ViT model.
            *   ğŸ“„ **`training_losses.json`**, ğŸ“„ **`loss_plot.png`**: Saved training metrics and visualizations.

*   ğŸ“ **`notebooks/`** ğŸ““: Location for Jupyter notebooks.
    *   ğŸ“„ **`01_mnist_vit_exploration.ipynb`**: Notebook for initial MNIST data loading, visualization, implementing/testing patching logic, and exploring basic ViT concepts.
    *   ğŸ“„ `(Optional) 02_phase2_data_generation.ipynb`, `03_phase3_design_ideas.ipynb`: Potential future notebooks for prototyping later phases.

*   ğŸ“ **`scripts/`** â–¶ï¸: Contains the main executable Python scripts.
    *   ğŸ“„ **`train_mnist_vit.py`**: The primary script to orchestrate ViT model training. Handles different phases based on configuration or arguments, loads data, initializes model, calls the trainer, saves artifacts, logs to W&B.
    *   ğŸ“„ **`evaluate.py`**: Script to load a trained model checkpoint and evaluate its performance (e.g., accuracy) on the MNIST test set or phase-specific test data.
    *   ğŸ“„ `(Optional) generate_project_doc.py`: Utility to auto-generate documentation.

*   ğŸ“ **`src/`** ğŸ: Contains the core source code organized into Python modules.
    *   ğŸ“„ **`__init__.py`**: Makes `src` a Python package.
    *   ğŸ“ **`mnist_transformer/`** âœ¨: Core module implementing the Vision Transformer logic for MNIST.
        *   ğŸ“„ **`__init__.py`**: Marks `mnist_transformer` as a sub-package.
        *   ğŸ“„ **`dataset.py`**: Contains functions and `Dataset` classes for loading standard MNIST (Phase 1), generating synthetic 2x2 grid data (Phase 2), and potentially handling dynamic layouts (Phase 3). Includes data transforms.
        *   ğŸ“„ **`modules.py`**: Defines the building blocks of the ViT: `PatchEmbedding`, `Attention` (Multi-Head Self-Attention), `MLPBlock`, `TransformerEncoderBlock`.
        *   ğŸ“„ **`model.py`**: Defines the main `VisionTransformer` nn.Module class, assembling the components from `modules.py` and adapting its input/output based on the project phase.
        *   ğŸ“„ **`trainer.py`**: Implements the training loop logic (`train_epoch`, `train_model`). Adapts the loss calculation and training steps for different phases (single output classification, multi-output classification, etc.).
        *   ğŸ“„ `(Optional) evaluation.py`: Functions for calculating specific metrics like overall accuracy, per-digit accuracy (Phase 2), etc.

*   ğŸ“ **`utils/`** ğŸ› ï¸: Contains shared utility modules.
    *   ğŸ“„ **`__init__.py`**: Marks `utils` as a package.
    *   ğŸ“„ **`device_setup.py`**: Function (`get_device`) for CPU/MPS/CUDA selection.
    *   ğŸ“„ **`logging.py`**: Configures the project logger (`Backprop Bunch`).
    *   ğŸ“„ **`run_utils.py`**: Helper functions (e.g., `load_config`, `save_losses`, `plot_losses`).

*   ğŸ“ **`wandb/`** â˜ï¸: Local cache and log directory for Weights & Biases. (Gitignored).

```

